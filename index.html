<!DOCTYPE html>
<html lang="hu">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Suno Prompt Gener√°tor V4 ‚Äî Biztons√°gos Verzi√≥</title>
  <style>
    :root{--bg:#0b0f15;--panel:#121826;--muted:#8892a6;--text:#e6edf6;--acc:#66d9e8;--line:#1f2937;--good:#22c55e;--warn:#f59e0b;--bad:#ef4444}
    *{box-sizing:border-box}
    body{margin:0;font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,"Helvetica Neue",Arial,sans-serif;background:linear-gradient(180deg,#0b0f15,#0e141f);color:var(--text)}
    .wrap{max-width:1400px;margin:20px auto;padding:12px}
    header{display:flex;gap:10px;align-items:center;justify-content:space-between;margin-bottom:12px}
    h1{font-size:18px;margin:0}
    .muted{color:var(--muted)}
    .small{font-size:11px}

    .grid{display:grid;grid-template-columns:repeat(12,1fr);gap:10px;grid-auto-flow:row dense}
    .card{grid-column:span 12;background:var(--panel);border:1px solid var(--line);border-radius:12px;padding:12px}

    .card.style-card { background-color: rgba(249, 115, 22, 0.1); border-color: #f97316; }
    .card.format-card { background-color: rgba(34, 197, 94, 0.1); border-color: #22c55e; }
    .card.mix-card { background-color: rgba(245, 158, 11, 0.1); border-color: #f59e0b; }

    @media(min-width:940px){.span3{grid-column:span 3}.span4{grid-column:span 4}.span5{grid-column:span 5}.span6{grid-column:span 6}.span7{grid-column:span 7}.span8{grid-column:span 8}.span9{grid-column:span 9}.span12{grid-column:span 12}}
    @media(min-width:1200px){.span7{grid-column:span 6}.span5{grid-column:span 6}.span8{grid-column:span 8}.span4{grid-column:span 4}}

    .card h2{font-size:13px;margin:0 0 8px;color:#c7d2fe;font-weight:600;letter-spacing:.2px}
    .card-number { color: var(--bad); margin-right: 8px; font-weight: 600; }
    label{display:block;font-size:12px;color:var(--muted);margin:6px 0 4px}

    select,input[type="text"],input[type="number"],textarea{width:100%;background:#0c1220;color:var(--text);border:1px solid #1f2a3a;border-radius:8px;padding:8px 10px;outline:none;font-size:12px}
    textarea{min-height:80px;resize:vertical}

    .row{display:flex;gap:6px;flex-wrap:wrap}
    .chip{background:#0c1220;border:1px solid #1f2a3a;color:#cbd5e1;padding:6px 10px;border-radius:999px;font-size:11px;cursor:pointer;user-select:none}
    .chip.active{border-color:var(--acc);box-shadow:0 0 0 2px #0b1720 inset;color:#e6fff9}

    .btn{background:linear-gradient(180deg,#1f9eaa,#0f7f8a);border:none;color:#fff;padding:8px 10px;border-radius:10px;font-weight:600;cursor:pointer;font-size:12px}
    .btn.secondary{background:#0c1220;border:1px solid #1f2a3a;color:#d1d5db}
    .btn.ghost{background:transparent;border:1px dashed #2a364a;color:#cbd5e1}
    .toolbar{display:flex;gap:8px;align-items:center;flex-wrap:wrap}
    .two{display:grid;grid-template-columns:1fr 1fr;gap:8px}
    .input-with-btn {display: flex; gap: 8px; align-items: center;}
    .input-with-btn input, .input-with-btn select {flex-grow: 1;}
    .input-with-btn .btn {flex-shrink: 0; padding: 8px;}

    .output{white-space:pre-wrap;background:#0c1220;border:1px dashed #1f2a3a;border-radius:12px;padding:12px;min-height:140px}

    .inst-groups{display:grid;gap:10px}
    details.inst-group{border:1px solid var(--line);border-radius:10px;background:#0c1220}
    summary.inst-head{display:flex;align-items:center;gap:8px;padding:8px 10px;border-bottom:1px solid #0f172a;color:#a5b4fc;font-weight:600}
    .inst-body{padding:8px}

    .meter{display:flex;align-items:center;gap:6px}
    .dot{width:8px;height:8px;border-radius:999px;background:var(--good)}
    .dot.warn{background:var(--warn)}
    .dot.bad{background:var(--bad)}
    .badge{font-size:11px;padding:2px 8px;border:1px solid #2a364a;border-radius:999px;color:#cbd5e1}

    .status-indicator {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      font-size: 11px;
      color: var(--muted);
    }
    .status-dot {
      width: 6px;
      height: 6px;
      border-radius: 50%;
      background: var(--muted);
    }
    .status-dot.online {
      background: var(--good);
    }
    .status-dot.error {
      background: var(--bad);
    }
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <h1>üéõÔ∏è Suno Prompt Gener√°tor V4 <span class="muted small">(Biztons√°gos verzi√≥ ‚Ä¢ Netlify Functions)</span></h1>
      <div class="toolbar">
        <div class="status-indicator">
          <div class="status-dot" id="serverStatus"></div>
          <span id="serverStatusText">Kapcsol√≥d√°s...</span>
        </div>
        <button class="btn secondary" id="savePresetBtn">Ment√©s</button>
        <button class="btn secondary" id="loadPresetBtn">Bet√∂lt√©s</button>
        <button class="btn secondary" id="exportBtn">Export</button>
        <button class="btn secondary" id="importBtn">Import</button>
        <button class="btn ghost" id="resetBtn">Vissza√°ll√≠t√°s</button>
      </div>
    </header>

    <div class="grid">
      <section class="card span6">
        <h2><span class="card-number">1.</span>Alapok</h2>
        <label for="title">Munkac√≠m (nem k√∂telez≈ë)</label>
        <div class="input-with-btn">
          <input id="title" type="text" placeholder="Pl. Midnight Swing" />
          <button class="btn secondary" id="generateTitleBtn">‚ú®</button>
        </div>

        <div class="two" style="margin-top:6px">
          <div>
            <label for="tempoMode">Tempo m√≥d</label>
            <select id="tempoModeSelect">
              <option value="bpm" selected>BPM megad√°sa</option>
              <option value="original">Original</option>
            </select>
          </div>
          <div>
            <label for="tempo">Tempo (BPM)</label>
            <input id="tempo" type="number" min="40" max="220" step="1" value="100" />
          </div>
        </div>

        <div class="two" style="margin-top:6px">
          <div>
            <label for="key">Hangnem</label>
            <select id="key">
              <option value="">No specific key</option>
              <option>C major</option><option>G major</option><option>D major</option><option>A major</option><option>E major</option><option>B major</option><option>F# major</option><option>F major</option>
              <option>A minor</option><option>E minor</option><option>B minor</option><option>F# minor</option><option>C# minor</option><option>G# minor</option><option>D minor</option>
            </select>
          </div>
          <div>
            <label for="timeSignature">√útemmutat√≥</label>
            <select id="timeSignature">
              <option value="">Nincs megadva</option>
              <option>2/4</option>
              <option>3/4</option>
              <option selected>4/4</option>
              <option>5/4</option>
              <option>6/8</option>
              <option>7/8</option>
              <option>12/8</option>
            </select>
          </div>
        </div>

        <label>Vok√°l</label>
        <div class="row" id="vocalChips">
          <div class="chip" data-value="instrumental">Instrumental only</div>
          <div class="chip active" data-value="vocal">Include vocal</div>
          <div class="chip" data-value="choir">Choir / backing only</div>
        </div>

        <div id="lyricsGenOpts" style="margin-top:6px">
          <label for="lyricsLang">Sz√∂veg nyelve</label>
          <select id="lyricsLang">
            <option value="en">English</option>
            <option value="hu">Magyar</option>
            <option value="it">Italiano</option>
          </select>
          <button class="btn" id="regenLyricsBtn">Dalsz√∂veg gener√°l√°sa ‚ú®</button>
        </div>
        
        <label for="lyricsText" style="margin-top:6px">Dalsz√∂veg</label>
        <div class="toolbar" style="margin-bottom: 4px;">
            <button class="btn secondary" id="rhymeAssistBtn">R√≠m Javaslat ‚ú®</button>
            <button class="btn secondary" id="metaphorAssistBtn">Metafora ‚ú®</button>
            <button class="btn secondary" id="verseExpanderBtn">Verze B≈ëv√≠t√©s ‚ú®</button>
        </div>
        <div id="lyricsSuggestionOutput" class="output" style="min-height: 40px; font-size: 11px; display: none; margin-bottom: 4px;"></div>
        <textarea id="lyricsText" placeholder="[verse] ... [chorus] ..."></textarea>

        <label style="margin-top:6px">Vok√°l t√≠pus</label>
        <div class="row" id="vocalType">
          <div class="chip" data-voctype="male">F√©rfi</div>
          <div class="chip" data-voctype="female">N≈ëi</div>
          <div class="chip" data-voctype="child">Gyerek</div>
          <div class="chip" data-voctype="female choir">N≈ëi k√≥rus</div>
          <div class="chip" data-voctype="male choir">F√©rfi k√≥rus</div>
          <div class="chip" data-voctype="mixed choir">Mix k√≥rus</div>
        </div>
        
        <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 6px;">
            <label for="mood" style="margin: 0;">Hangulat (szavak vessz≈ëvel)</label>
            <button class="btn secondary" id="suggestMoodThemeBtn">Hangulat & T√©ma ‚ú®</button>
        </div>
        <input id="mood" type="text" placeholder="romantic, cinematic, dramatic, warm" value="cinematic, dynamic, warm" />
        
        <label for="theme" style="margin-top:6px">T√©ma / r√∂vid le√≠r√°s</label>
        <textarea id="theme" placeholder="Pl. A lively vintage feel with modern punch."></textarea>
        <div class="row" style="margin-top:6px">
          <button class="btn secondary" id="forceHuDetect">HU ‚Üí EN ford√≠t√°s ‚ú®</button>
          <button class="btn secondary" id="copyThemeBtn">T√©ma m√°sol√°sa</button>
        </div>
      </section>

      <section class="card span6 format-card">
        <h2><span class="card-number">2.</span>Form√°tum & st√≠lus</h2>
        
        <label for="styleExtra" style="margin-top:6px">Extra st√≠lus-megjegyz√©s</label>
        <input id="styleExtra" type="text" placeholder="Pl. 1930s radio texture, sidechain pump" />

        <label for="negative" style="margin-top:6px">Negat√≠v / ker√ºlend≈ë elemek</label>
        <div class="input-with-btn">
            <input id="negative" type="text" placeholder="no distortion, no harsh sibilance, avoid EDM drops" />
            <button class="btn secondary" id="suggestNegativeBtn">‚ú®</button>
        </div>

        <label for="quickPresetsDropdown" style="margin-top:6px">Gyors sablonok</label>
        <select id="quickPresetsDropdown">
          <option value="">V√°lassz egy sablont‚Ä¶</option>
        </select>
      </section>

      <section class="card span8 style-card">
        <h2><span class="card-number">3.</span>Zenei st√≠lus</h2>
        <label>V√°laszd ki (t√∂bb is lehet)</label>
        <div class="row" id="styleChips"></div>
        <button class="btn secondary" id="styleBlenderBtn" style="margin-top: 8px;">St√≠lus Kever≈ë ‚ú®</button>
      </section>

      <section class="card span4">
        <h2><span class="card-number">4.</span>Hangszerel√©s</h2>
        <div id="instChips" class="inst-groups"></div>
        <button class="btn secondary" id="suggestInstBtn" style="margin-top:6px">Hangszerek javasl√°sa ‚ú®</button>
        <label for="instExtra" style="margin-top:6px">Extra hangszerel√©s</label>
        <input id="instExtra" type="text" placeholder="Pl. muted trumpets, pizzicato cellos, brushed snare" />
      </section>

      <section class="card span8 mix-card">
        <h2><span class="card-number">5.</span>Szerkezet & Mix</h2>
        <label for="structure">Szerkezet</label>
        <textarea id="structure" placeholder="Intro ‚Äì Verse ‚Äì Chorus ‚Äì Verse ‚Äì Chorus ‚Äì Bridge ‚Äì Chorus ‚Äì Outro"></textarea>

        <div class="two" style="margin-top:6px">
          <div>
            <label for="ending">Z√°r√°s (Ending)</label>
            <select id="ending">
              <option>clear, resolved ending (no fade-out)</option>
              <option>cold stop (sudden end)</option>
              <option>long reverb tail</option>
              <option>gradual fade-out</option>
            </select>
          </div>
          <div>
            <label for="mix">Mix / Produkci√≥</label>
            <div class="input-with-btn">
                <input id="mix" type="text" placeholder="Tight low end, wide strings, gentle saturation, no clipping." />
                <button class="btn secondary" id="suggestMixBtn">‚ú®</button>
            </div>
          </div>
        </div>
      </section>

      <section class="card span12">
        <h2><span class="card-number">6.</span>Prompt kimenet</h2>
        <div class="toolbar" style="margin-bottom:6px">
          <button class="btn" id="generateBtn">Prompt k√©sz√≠t√©se</button>
          <button class="btn secondary" id="copyBtn">M√°sol√°s</button>
          <button class="btn secondary" id="optimizePromptBtn">Optimaliz√°l√°s ‚ú®</button>
          <button class="btn secondary" id="shortenBtn">R√∂vid√≠t√©s ‚ú®</button>
          <button class="btn secondary" id="expandBtn">B≈ëv√≠t√©s ‚ú®</button>
          <span class="badge" id="lengthBadge">0 ch</span>
          <span class="meter"><span class="dot" id="lenDot"></span><span class="small muted" id="lenHint">Ide√°lis</span></span>
        </div>
        <textarea id="output" class="output"></textarea>
      </section>
      
      <section class="card span12" id="lyricsOutputSection" style="display:none;">
        <h2><span class="card-number">7.</span>Dalsz√∂veg kimenet</h2>
        <div class="toolbar" style="margin-bottom:6px">
          <button class="btn" id="copyLyricsBtn">Sz√∂veg m√°sol√°sa</button>
        </div>
        <textarea id="lyricsOutput" class="output" readonly></textarea>
      </section>
    </div>
  </div>

  <script src="app.js"></script>
</body>
</html>